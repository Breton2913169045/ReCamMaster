# ReCamMaster: Camera-Controlled Generative Rendering from A Single Video

<div align="center">
<div align="center" style="margin-top: 0px; margin-bottom: 0px;">
<img src=https://github.com/user-attachments/assets/81ccf80e-f4b6-4a3d-b47a-e9c2ce14e34f width="30%"/>
</div>

### [<a href="https://arxiv.org/abs/2503.11647" target="_blank">arXiv</a>] [<a href="https://jianhongbai.github.io/ReCamMaster/" target="_blank">Project Page</a>] [<a href="https://huggingface.co/datasets/KwaiVGI/MultiCamVideo-Dataset" target="_blank">Dataset</a>]
_**[Jianhong Bai<sup>1*</sup>](https://jianhongbai.github.io/), [Menghan Xia<sup>2â€ </sup>](https://menghanxia.github.io/), [Xiao Fu<sup>3</sup>](https://fuxiao0719.github.io/), [Xintao Wang<sup>2</sup>](https://xinntao.github.io/), [Lianrui Mu<sup>1</sup>](https://scholar.google.com/citations?user=dCik-2YAAAAJ&hl=en), [Jinwen Cao<sup>2</sup>](https://openreview.net/profile?id=~Jinwen_Cao1), <br>[Zuozhu Liu<sup>1</sup>](https://person.zju.edu.cn/en/lzz), [Haoji Hu<sup>1â€ </sup>](https://person.zju.edu.cn/en/huhaoji), [Xiang Bai<sup>4</sup>](https://scholar.google.com/citations?user=UeltiQ4AAAAJ&hl=en), [Pengfei Wan<sup>2</sup>](https://scholar.google.com/citations?user=P6MraaYAAAAJ&hl=en), [Di Zhang<sup>2</sup>](https://openreview.net/profile?id=~Di_ZHANG3)**_
<br>
(*Work done during an internship at KwaiVGI, Kuaishou Technology â€ corresponding authors)

<sup>1</sup>Zhejiang University, <sup>2</sup>Kuaishou Technology, <sup>3</sup>CUHK, <sup>4</sup>HUST.

</div>

## ðŸ”¥ Updates
- __[2024.03.17]__: Release the [project page](https://jianhongbai.github.io/ReCamMaster/) and the [try out link](https://docs.google.com/forms/d/e/1FAIpQLSezOzGPbm8JMXQDq6EINiDf6iXn7rV4ozj6KcbQCSAzE8Vsnw/viewform?usp=dialog).
- __[2024.03.31]__: Release the [MultiCamVideo Dataset](https://huggingface.co/datasets/KwaiVGI/MultiCamVideo-Dataset).
- __[2024.03.31]__: We have sent the inference results to the first 1000 trial users.
  
## ðŸ“– Introduction

**TL;DR:** We propose ReCamMaster to re-capture in-the-wild videos with novel camera trajectories.  <br>

https://github.com/user-attachments/assets/52455e86-1adb-458d-bc37-4540a65a60d4

## ðŸš€ Try ReCamMaster with Your Own Videos

**Update:** We are actively processing the videos uploaded by users. So far, we have sent the inference results to the email addresses of the first **1010** testers. You should receive an email titled "Inference Results of ReCamMaster" from either jianhongbai@zju.edu.cn or cpurgicn@gmail.com. Please also check your spam folder, and let us know if you haven't received the email after a long time. If you enjoyed the videos we created, please consider giving us a star ðŸŒŸ.

**You can try out our ReCamMaster by uploading your own video to [this link](https://docs.google.com/forms/d/e/1FAIpQLSezOzGPbm8JMXQDq6EINiDf6iXn7rV4ozj6KcbQCSAzE8Vsnw/viewform?usp=dialog), which will generate a video with camera movements along a new trajectory.** We will send the mp4 file generated by ReCamMaster to your inbox as soon as possible. For camera movement trajectories, we offer 10 basic camera trajectories as follows:

| Index       | Basic Trajectory                  |
|-------------------|-----------------------------|
| 1    | Pan Right                   |
| 2 | Pan Left                    |
| 3 | Tilt Up                     |
| 4 | Tilt Down                   |
| 5 | Zoom In                     |
| 6 | Zoom Out                    |
| 7 | Translate Up (with rotation)   |
| 8 | Translate Down (with rotation) |
| 9 | Arc Left (with rotation)    |
| 10 | Arc Right (with rotation)   |

If you would like to use ReCamMaster as a baseline and need qualitative or quantitative comparisons, please feel free to drop an email to [jianhongbai@zju.edu.cn](mailto:jianhongbai@zju.edu.cn). We can assist you with batch inference of our model.

## ðŸ“· MultiCamVideo Dataset
### 1. Dataset Introduction

**TL;DR:** The MultiCamVideo Dataset is a multi-camera synchronized video dataset rendered using Unreal Engine 5. It includes synchronized multi-camera videos and its corresponding camera trajectories. The MultiCamVideo Dataset can be valuable in fields such as camera-controlled video generation, synchronized video production, and 3D/4D reconstruction.

https://github.com/user-attachments/assets/6fa25bcf-1136-43be-8110-b527638874d4

The MultiCamVideo Dataset is a multi-camera synchronized video dataset rendered using Unreal Engine 5. It includes synchronized multi-camera videos and its corresponding camera trajectories.
It consists of 13.6K different dynamic scenes, each captured by 10 cameras, resulting in a total of 136K videos. Each dynamic scene is composed of four elements: {3D environment, character, animation, camera}. Specifically, we use animation to drive the character, 
and positioning the animated character within the 3D environment. Then, Time-synchronized cameras are then set up to move along predefined trajectories to render the multi-camera video data.
<p align="center">
  <img src="https://github.com/user-attachments/assets/107c9607-e99b-4493-b715-3e194fcb3933" alt="Example Image" width="70%">
</p>

**3D Environment:** We collect 37 high-quality 3D environments assets from [Fab](https://www.fab.com). To minimize the domain gap between rendered data and real-world videos, we primarily select visually realistic 3D scenes, while choosing a few stylized or surreal 3D scenes as a supplement. To ensure data diversity, the select scenes cover a variety of indoor and outdoor settings, such as city streets, shopping malls, cafes, office rooms, and countryside.

**Character:** We collect 66 different human 3D models as characters from [Fab](https://www.fab.com) and [Mixamo](https://www.mixamo.com).

**Animation:** We collect 93 different animations from [Fab](https://www.fab.com) and [Mixamo](https://www.mixamo.com), including common actions such as waving, dancing, and cheering. We use these animations to drive the collected characters and created diverse datasets through various combinations.

**Camera:** To ensure camera movements are diverse and closely resemble real-world distributions, we create a wide range of camera trajectories and parameters to cover various situations. To achieve this by designing rules to batch-generate random camera starting positions and movement trajectories:

1. Camera Starting Position.

We take the character's position as the center of a hemisphere with a radius of {3m, 5m, 7m, 10m} based on the size of the 3D scene and randomly sample within this range as the camera's starting point, ensuring the closest distance to the character is greater than 0.5m and the pitch angle is within 45 degrees.

2. Camera Trajectories.

- **Pan & Tilt**:  
  The camera rotation angles are randomly selected within the range, with pan angles ranging from 5 to 45 degrees and tilt angles ranging from 5 to 30 degrees, with directions randomly chosen left/right or up/down.

- **Basic Translation**:  
  The camera translates along the positive and negative directions of the xyz axes, with movement distances randomly selected within the range of $[\frac{1}{4}, 1] \times \text{distance2character}$.

- **Basic Arc Trajectory**:  
  The camera moves along an arc, with rotation angles randomly selected within the range of 15 to 75 degrees.

- **Random Trajectories**:  
  1-3 points are sampled in space, and the camera moves from the initial position through these points as the movement trajectory, with the total movement distance randomly selected within the range of $[\frac{1}{4}, 1] \times \text{distance2character}$. The polyline is smoothed to make the movement more natural.

- **Static Camera**:  
  The camera does not translate or rotate during shooting, maintaining a fixed position.

3. Camera Movement Speed.

To further enhance the diversity of trajectories, 50% of the training data uses constant-speed camera trajectories, while the other 50% uses variable-speed trajectories generated by nonlinear functions. Consider a camera trajectory with a total of $f$ frames, starting at location $L_{start}$ and ending at position $L_{end}$. The location at the $i$-th frame is given by:
```math
L_i = L_{start} + (L_{end} - L_{start}) \cdot \left( \frac{1 - \exp(-a \cdot i/f)}{1 - \exp(-a)} \right),
```
where $a$ is an adjustable parameter to control the trajectory speed. When $a > 0$, the trajectory starts fast and then slows down; when $a < 0$, the trajectory starts slow and then speeds up. The larger the absolute value of $a$, the more drastic the change.

4. Camera Parameters.

We chose four set of camera parameters: {focal=18mm, aperture=10}, {focal=24mm, aperture=5}, {focal=35mm, aperture=2.4} and {focal=50mm, aperture=2.4}.

### 2. Statistics and Configurations

Dataset Statistics:

| Number of Dynamic Scenes | Camera per Scene | Total Videos |
|:------------------------:|:----------------:|:------------:|
| 13,600                   | 10               | 136,000      |

Video Configurations:

| Resolution  | Frame Number | FPS                      |
|:-----------:|:------------:|:------------------------:|
| 1280x1280   | 81           | 15                       |

Note: You can use 'center crop' to adjust the video's aspect ratio to fit your video generation model, such as 16:9, 9:16, 4:3, or 3:4.

Camera Configurations:

| Focal Length            | Aperture           | Sensor Height | Sensor Width |
|:-----------------------:|:------------------:|:-------------:|:------------:|
| 18mm, 24mm, 35mm, 50mm  | 10.0, 5.0, 2.4     | 23.76mm       | 23.76mm      |



### 3. File Structure
```
MultiCamVideo-Dataset
â”œâ”€â”€ train
â”‚   â”œâ”€â”€ f18_aperture10
â”‚   â”‚   â”œâ”€â”€ scene1    # one dynamic scene
â”‚   â”‚   â”‚   â”œâ”€â”€ videos
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cam01.mp4    # synchronized 81-frame videos at 1280x1280 resolution
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cam02.mp4
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ...
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ cam10.mp4
â”‚   â”‚   â”‚   â””â”€â”€ cameras
â”‚   â”‚   â”‚       â””â”€â”€ camera_extrinsics.json    # 81-frame camera extrinsics of the 10 cameras 
â”‚   â”‚   â”œâ”€â”€ ...
â”‚   â”‚   â””â”€â”€ scene3400
â”‚   â”œâ”€â”€ f24_aperture5
â”‚   â”‚   â”œâ”€â”€ scene1
â”‚   â”‚   â”œâ”€â”€ ...
â”‚   â”‚   â””â”€â”€ scene3400
â”‚   â”œâ”€â”€ f35_aperture2.4
â”‚   â”‚   â”œâ”€â”€ scene1
â”‚   â”‚   â”œâ”€â”€ ...
â”‚   â”‚   â””â”€â”€ scene3400
â”‚   â””â”€â”€ f50_aperture2.4
â”‚       â”œâ”€â”€ scene1
â”‚       â”œâ”€â”€ ...
â”‚       â””â”€â”€ scene3400
â””â”€â”€ val
    â””â”€â”€ 10basic_trajectories
        â”œâ”€â”€ videos
        â”‚   â”œâ”€â”€ cam01.mp4    # example videos corresponding to the validation cameras
        â”‚   â”œâ”€â”€ cam02.mp4
        â”‚   â”œâ”€â”€ ...
        â”‚   â””â”€â”€ cam10.mp4
        â””â”€â”€ cameras
            â””â”€â”€ camera_extrinsics.json    # 10 different trajectories for validation
```

### 3. Useful scripts
- Data Extraction
```bash
cat MultiCamVideo-Dataset.part* > MultiCamVideo-Dataset.tar.gz
tar -xzvf MultiCamVideo-Dataset.tar.gz
```
- Camera Visualization
```python
python vis_cam.py
```

The visualization script is modified from [CameraCtrl](https://github.com/hehao13/CameraCtrl/blob/main/tools/visualize_trajectory.py), thanks for their inspiring work.

<p align="center">
  <img src="https://github.com/user-attachments/assets/f9cf342d-2fb3-40ef-a7be-edafb5775004" alt="Example Image" width="40%">
</p>

## ðŸ¤— Awesome Related Works
Feel free to explore these outstanding related works, including but not limited to:

[GCD](https://gcd.cs.columbia.edu/): GCD synthesize large-angle novel viewpoints of 4D dynamic scenes from a monocular video.

[ReCapture](https://generative-video-camera-controls.github.io/): a method for generating new videos with novel camera trajectories from a single user-provided video.

[Trajectory Attention](https://xizaoqu.github.io/trajattn/): Trajectory Attention facilitates various tasks like camera motion control on images and videos, and video editing.

[GS-DiT](https://wkbian.github.io/Projects/GS-DiT/): GS-DiT provides 4D video control for a single monocular video.

[Diffusion as Shader](https://igl-hkust.github.io/das/): a versatile video generation control model for various tasks.

[TrajectoryCrafter](https://trajectorycrafter.github.io/): TrajectoryCrafter achieves high-fidelity novel views generation from casually captured monocular video.

[GEN3C](https://research.nvidia.com/labs/toronto-ai/GEN3C/): a generative video model with precise Camera Control and temporal 3D Consistency.

## ðŸŒŸ Citation

Please leave us a star ðŸŒŸ and cite our paper if you find our work helpful.
```
@misc{bai2025recammaster,
      title={ReCamMaster: Camera-Controlled Generative Rendering from A Single Video}, 
      author={Jianhong Bai and Menghan Xia and Xiao Fu and Xintao Wang and Lianrui Mu and Jinwen Cao and Zuozhu Liu and Haoji Hu and Xiang Bai and Pengfei Wan and Di Zhang},
      year={2025},
      eprint={2503.11647},
      archivePrefix={arXiv},
      primaryClass={cs.CV},
      url={https://arxiv.org/abs/2503.11647}, 
}
```
